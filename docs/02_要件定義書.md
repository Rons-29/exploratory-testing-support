# AIテストパートナー 要件定義書

**作成日**: 2025年10月2日  
**バージョン**: v1.0

## 1. 機能要件

### 1.1 MVP機能（Must - 絶対に必要な機能）

#### 1.1.1 セッション管理

- **機能概要**: テストの開始/終了を管理する
- **詳細**:
  - テストセッションの開始
  - テストセッションの終了
  - テストセッションの一時停止/再開
  - セッション状態の可視化（拡張機能アイコンの色変化）

#### 1.1.2 操作ログの自動記録

- **機能概要**: ユーザーの操作（クリック、入力等）を時系列で記録する
- **詳細**:
  - クリックイベントの記録（要素のCSSセレクタ、座標等）
  - キーボード入力の記録（入力値、要素情報等）
  - ページ遷移の記録（URL、遷移時刻等）
  - マウス移動の記録（軌跡、ホバー要素等）

#### 1.1.3 コンソールログの自動取得

- **機能概要**: JavaScriptのエラーや警告をキャプチャする
- **詳細**:
  - エラーログの自動記録
  - 警告ログの自動記録
  - ログレベルの分類
  - ログ発生時刻の記録

#### 1.1.4 ログ確認画面

- **機能概要**: 記録した全情報を時系列で確認できる
- **詳細**:
  - 時系列でのログ表示
  - ログのフィルタリング機能
  - ログの検索機能
  - フラグ立てした箇所のハイライト表示

#### 1.1.5 ワンクリック・スクリーンショット

- **機能概要**: 任意のタイミングで表示画面を撮影・記録する
- **詳細**:
  - 拡張機能ポップアップからの撮影
  - フローティングボタンからの撮影
  - スクリーンショットの自動保存
  - ログとの紐付け

#### 1.1.6 ネットワークエラーの自動記録

- **機能概要**: API等の通信エラー(4xx/5xx)をキャプチャする
- **詳細**:
  - HTTPステータスコードの監視
  - リクエスト/レスポンス情報の記録
  - エラー発生時刻の記録
  - エラー内容の詳細記録

#### 1.1.7 簡易エクスポート機能

- **機能概要**: 記録内容をMarkdown形式でクリップボードにコピーし、外部ツールに連携できる
- **詳細**:
  - Markdown形式でのレポート生成
  - クリップボードへの自動コピー
  - スクリーンショットのリンク埋め込み
  - レポートの構造化

### 1.2 追加機能（Should - あると望ましい機能）

#### 1.2.1 フラグ機能

- **機能概要**: バグ発見時に重要な箇所をマークする
- **詳細**:
  - フローティングボタンでのフラグ立て
  - メモの追加機能
  - フラグ箇所のハイライト表示
  - フラグとスクリーンショットの自動紐付け

#### 1.2.2 ライブログ表示

- **機能概要**: テスト中にリアルタイムでログを確認する
- **詳細**:
  - テスト継続中のログ確認
  - リアルタイム更新
  - 簡易フィルタリング
  - ポップアップでの表示

#### 1.2.3 UI改善機能

- **機能概要**: フローティングボタンの使いやすさを向上
- **詳細**:
  - ボタンの位置調整（ドラッグ&ドロップ）
  - 最小化モード
  - ツールチップ表示
  - キーボードショートカット対応

### 1.3 将来機能（Could - 将来的に検討したい機能）

#### 1.3.1 AIによる異常検知・提案

- **機能概要**: UIの崩れやパフォーマンスの低下をAIが検知・指摘する
- **詳細**:
  - レイアウト崩れの検知
  - パフォーマンス低下の検知
  - 異常パターンの学習
  - 改善提案の生成

#### 1.3.2 AIによるテスト観点の推薦

- **機能概要**: 現在の画面から、試すべきテストケースをAIが提案する
- **詳細**:
  - 画面要素の分析
  - テストケースの提案
  - エッジケースの提示
  - 学習による精度向上

#### 1.3.3 再現手順の自動生成

- **機能概要**: バグ発見時に、Playwrightなどの自動テストスクリプトを生成する
- **詳細**:
  - 操作手順の自動記録
  - テストスクリプトの生成
  - 複数形式での出力
  - カスタマイズ機能

#### 1.3.4 外部ツール連携

- **機能概要**: JiraやSlackにワンクリックでバグ報告を起票できる
- **詳細**:
  - Jira連携
  - Slack連携
  - GitHub Issues連携
  - カスタムWebhook対応

## 2. 非機能要件

### 2.1 パフォーマンス要件

- **ブラウザへの影響**: サービスを有効にしても、テスト対象サイトの動作が体感で遅くならないこと
- **レスポンス時間**: 操作ログの記録は100ms以内
- **メモリ使用量**: 拡張機能のメモリ使用量は50MB以下
- **CPU使用率**: アイドル時のCPU使用率は1%以下

### 2.2 ユーザビリティ要件

- **学習コスト**: マニュアルを読まなくても、基本的な操作（テスト開始/終了、レポート確認）ができること
- **直感性**: 操作フローが直感的で、迷いなく使用できること
- **アクセシビリティ**: キーボードショートカットによる操作が可能であること

### 2.3 セキュリティ要件

- **データ保護**: テスト対象サイトの認証情報（Cookieなど）や入力内容が外部に漏洩しないこと
- **通信暗号化**: 全ての通信はHTTPSで暗号化されること
- **データ暗号化**: 保存データはAES-256で暗号化されること
- **認証**: Google/GitHubアカウントによるOAuth認証を使用すること

### 2.4 互換性要件

- **ブラウザ対応**: Google Chromeの最新版に対応すること
- **OS対応**: Windows、macOS、Linuxに対応すること
- **画面解像度**: 1024x768以上の解像度に対応すること

### 2.5 可用性要件

- **稼働率**: 99.9%以上の稼働率を維持すること
- **データ保持**: テストセッションデータは最低30日間保持すること
- **バックアップ**: データの定期的なバックアップを実施すること

## 3. 制約事項

### 3.1 技術的制約

- Chrome拡張機能のAPI制限内での実装
- Chrome DevTools Protocolの機能範囲内での実装
- ブラウザのセキュリティポリシーに準拠

### 3.2 法的制約

- 個人情報保護法への準拠
- 各企業のセキュリティポリシーへの準拠
- データの取り扱いに関する法的要件への準拠

### 3.3 運用制約

- 初期リリースは日本語のみ対応
- サポートは平日9:00-18:00（JST）
- データセンターは日本国内に設置

## 4. 前提条件

### 4.1 ユーザー環境

- Google Chrome バージョン120以上
- インターネット接続環境
- GoogleアカウントまたはGitHubアカウント

### 4.2 開発環境

- Node.js 18以上
- TypeScript 5.0以上
- PostgreSQL 14以上

### 4.3 運用環境

- Google Cloud Platform
- Cloud Run（サーバーレスコンテナ）
- Cloud SQL（PostgreSQL）
